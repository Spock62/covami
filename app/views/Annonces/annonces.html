#{extends 'main.html' /}
#{set title:'Covami - Annonces' /}
%{def couleur = 0}%

<h1>Toutes les annonces</h1>
#{form @recherche(field)}
	<div style="text-align:center;">
		<input type="text" name="field" value="Annonceur, Ville, Date de depart" style="text-align:center;" onClick="javascript:this.value=''"/>
		<input type="submit" value="Rechercher" style="margin: auto 0;"/>
	</div>
#{/form}
<table id="tableMesAnnonces">
  <tr class="tableEntete">
  	<td>Annonceur</td>
  	<td>Ville depart</td>
  	<td>Ville arriv&eacute;e</td>
  	<td style="width : 100px;">Date depart</td>
  	<td style="width : 100px;">Heure depart</td>
  	<td style="width : 90px;">Tarif/pers.</td>
  	<td style="width : 90px;">Places</td>
  	
  	
  </tr>
  #{list items:annonces, as:'annonces' }  
  	#{if couleur == 0}
  		<tr class="tableBody" style="background-color : #C4C4C4">
  		%{couleur = 1}%
  	#{/if}
  	#{else}
  		<tr class="tableBody" style="background-color : white">
  		%{couleur = 0}%
  	#{/else}
		<td style="text-align:left;">${annonces.monUtilisateur.prenom}&nbsp;${annonces.monUtilisateur.nom}</td>
  		<td>${annonces.monTrajet.villeDepart.nom}</td>
  		<td>${annonces.monTrajet.villeArrivee.nom}</td>
  		<td style="width : 100px;">${annonces.monTrajet.dateDepart?.format('dd/MM/yyyy')}</td>
  		<td style="width : 100px;">${annonces.monTrajet.dateDepart?.format('HH:mm')}</td>
  		<td style="width : 90px;">${annonces.tarifParPersonne}&euro;</td>
  		<td style="width : 90px;">${annonces.monUtilisateur.maVoiture?.nbPlaces}</td>
  		<td style="width: 80px;"><a class="lien" href="@{Annonces.details(annonces.id)}">D&eacute;tails</a></td>
  	</tr> 
  #{/list} 
  
  
</table>
